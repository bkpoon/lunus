==> avgim.c <==
/* AVGIM.C - Calculate the average intensity for an input image.
   
   Author: Mike Wall   
   Date: 1/11/95
   Version: 1.
   
   "avgim <input image>"

   Input is TIFF TV6 image.  Output is a number which is the average
   pixel value in the image.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein;
  

==> avgr.c <==
/* AVGR.C - Generate a table of average voxel values as a function of radius
		for an input 3D lattice.
   
   Author: Mike Wall
   Date: 3/28/93
   Version: 1.
   
   Usage:
   		"avgr <input file> <output file>"

   Input is a 3D lattice.  Output is a list of average value by radius, to be 
	labelled (0,1,2,3,...).

   */

#include<mwmask.h>

void main(argc, argv)
	short argc;
	char *argv[];

==> avgrf.c <==
/* AVGRF.C - Average the values of an rfile.
   
   Author: Mike Wall
   Date: 1/12/95
   Version: 1.
   
   "avgrf <input rfile> <output value file>"
   
   Input is one rfile.  Output is average value to output file.
   
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *infile1,
    *outfile;
  

==> avgrim.c <==
/* AVGRIM.C - Calculate the average intensity vs. radius for an
		input image.
   
   Author: Mike Wall   
   Date: 4/3/93
   Version: 1.
   
   "avgrim <input image> <output rfile> <x origin> <y origin>"

   Input is TIFF TV6 image and pixel origin.  Output is a list of
        values of I(r).

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,

==> avgrlt.c <==
/* AVGRLT.C - Calculate the average voxel value vs. radius for an 
              input lattice
   
   Author: Mike Wall
   Date: 3/1/95
   Version: 1.
   
   Usage:
   		"avgrlt <input lattice> <output rfile> <x-origin>
		        <y-origin> <z-origin>"

		Input is a 3D lattice and voxel coordinates for the
		origin.  Output is an rfile.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE

==> avgsqim.c <==
/* AVGSQIM.C - Calculate the average squared pixel value for an input image.
   
   Author: Mike Wall   
   Date: 1/23/95
   Version: 1.
   
   "avgsqim <input image>"

   Input is TIFF TV6 image.  Output is a number which is the average
   squared pixel value in the image.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein;
  

==> avsqrim.c <==
/* AVSQRIM.C - Calculate the average squared pixel value vs. radius 
		for an input image.
   
   Author: Mike Wall   
   Date: 4/18/93
   Version: 1.
   
   "avsqrim <input image> <output rfile> <x origin> <y origin>"

   Input is TIFF TV6 image.  Output is a list of values of I^2(r).

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,
	*outfile;

==> avsqrlt.c <==
/* AVSQRLT.C - Calculate the average square voxel value vs. radius for an 
              input lattice
   
   Author: Mike Wall
   Date: 3/15/95
   Version: 1.
   
   Usage:
   		"avsqrlt <input lattice> <output rfile> <x-origin>
		    <y-origin> <z-origin>"

		Input is a 3D lattice and the voxel coordinates of the
		origin.   Output is an rfile.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE

==> binasc.c <==
/* BINASC.C - Perform various binary/ascii conversions.
   Author: Mike Wall
   Date: 3/29/94
   Version: 1.0
   Description:

		"binasc [options] < input > output"

		Input is a binary/ascii stream.  
		Output is a binary/ascii stream.
*/

#include<mwmask.h>
#define SCALE 200.

void main(int argc, char *argv[])
{
  float
    x,
    y,

==> buttim.c <==
/* BUTTIM.C - Mask a diffraction image using a butterfly shape.
   
   Author: Mike Wall
   Date: 6/22/94
   Version: 1.
   
   "buttim <image in> <image out> <x origin> <y origin>
      <offset angle> <opening angle>" 

   Input is diffraction image and butterfly parameters.  
       Output is masked image.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,

==> constim.c <==
/* CONSTIM - Create an image with constant pixel value based on an input
		image format.
   
   Author: Mike Wall
   Date: 4/18/94
   Version: 1.
   
   "constim <image in> <constant> <image out>" 

   Input is image and constant.  Output is constant image in the
        format of the input image.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,

==> constlt.c <==
/* CONSTLT.C - Create a constant lattice, using an input lattice as a */
/* template. 
   
   Author: Mike Wall
   Date: 8/5/95
   Version: 1.
   
   Usage:
   		"constlt <input lattice> <output lattice> <constant>"

		Input is a scalar and an input lattice.  Output is a 
		constant lattice in the format of the input lattice.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein,

==> constrf.c <==
/* CONSTRF.C - Create an rfile with the value of a constant given at the
		input line.
   
   Author: Mike Wall
   Date: 4/19/94
   Version: 1.
   
   "constrf <input rfile> <constant> <output rfile>"

   Input is an rfile and a constant.  Output is an rfile with all values 
   equal to constant, in the format of the input rfile.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*infile,

==> culllt.c <==
/* CULLLT.C - Throw away part of a lattice.
   
   Author: Mike Wall
   Date: 4/26/95
   Version: 1.
   
   Usage:
   		"culllt <input lattice> <output lattice> <inner
		radius> <outer radius>"

		Input is a scalar and a radius range. 
		Output is a culled lattice, with voxels in the
		specified range preserved.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE

==> cutim.c <==
/* CUTIM.C - "Cut" a rectangle out of an image by marking pixels 
     with ignore tags.
   
   Author: Mike Wall  
   Date: 1/13/95
   Version: 1.
   
   "cutim <image in> <x_lower_bound> <x_upper_bound> <y_lower_bound> 
		<y_upper_bound> <image out>

   Input is diffraction image.  Output is 16-bit 
     image of specified size (1024 x 1024 default), with pixels inside bounds
     marked to be ignored.
   
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{

==> df2im.c <==
/* DF2IM.C - Generate an image based upon a diffuse features file.
                
   Author: Mike Wall  
   Date: 5/30/94
   Version: 1.0
   
   "df2im <diffuse features in> <template image in> <image out>"

   Input is ascii diffuse features file and input template image.  Output is
   diffuse features file.

*/

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *featurein,
    *imageout,

==> dfrflt.c <==
/* DFRFLT.C - Calculate an R-factor rfile for two input lattices.
   
   Author: Mike Wall
   Date: 7/9/95
   Version: 1.
   
   Usage:
   		"dfrflt <input lattice 1> <input lattice 2> <output
		rfile>"

		Input is two 3D lattices.  Output is an rfile.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein1,
    *latticein2,

==> dfsqrlt.c <==
/* DFSQRLT.C - Calculate the average difference squared voxel value
               vs.  radius between two input lattices in radial shells
   
   Author: Mike Wall
   Date: 3/15/95
   Version: 1.
   
   Usage:
   		"dfsqrlt <input lattice 1> <input lattice 2> <output
		rfile>"

		Input is two 3D lattices.  Output is an rfile.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein1,

==> divlt.c <==
/* DIVLT.C - Calculate the voxel-by-voxel quotient of two lattices.
   
   Author: Mike Wall
   Date: 4/11/95
   Version: 1.
   
   Usage:
   		"divlt <input lattice 1> <input lattice 2> <output
		lattice>"

		Input is two 3D lattices.  Output is a lattice which
		is the quotient of the two (1/2).  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein1,

==> divrf.c <==
/* DIVRF.C - Divide one rfile by another.
   
   Author: Mike Wall
   Date: 4/19/94
   Version: 1.
   
   "divrf <input rfile 1> <input rfile 2> <output rfile>"

   Input is two rfiles.  Output is first rfile divided point-by-point by the
   second.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*infile1,
	*infile2,

==> dos2unix.c <==
#include<stdio.h>
#include<stdlib.h>

#define CR 13
#define END_OF_STREAM 255

void main(void)
{
	char 
		ch;

	while ((ch = getchar()) != END_OF_STREAM) {
		if (ch != CR) putchar(ch);
	}
}



==> explt.c <==
/* EXPLT.C - Multiply each voxel value in a lattice by an exponential,
             to correct for a Debye-Waller factor.
   
   Author: Mike Wall
   Date: 3/21/95
   Version: 1.
   
   Usage:
   		"explt <input lattice> <width> <output lattice>"

		Input is an input lattice and the width of a gaussian.
		Output is Debye-Waller factor corrected lattice.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein,

==> fftim.c <==
/* FFTIM.C - Calculate the fft of an image.
   
   Author: Mike Wall
   Date: 3/15/95
   Version: 1.
   
   Usage:
   		"fftim <real input image> <imaginary input image>
		<real FFT image> <imaginary FFT image> <isign>"

		Input is real and imaginary image.  Output is FFT of
		image.  Isign=1 indicates forwards; -1 indicates inverse.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE

==> fftlt.61.c <==
/* FFTLT.C - Calculate the fft of a lattice.
   
   Author: Mike Wall
   Date: 2/28/95
   Version: 1.
   
   Usage:
   		"fftlt <real input lattice> <imaginary input lattice>
		<real FFT lattice> <imaginary FFT lattice>"

		Input is real and imaginary lattice.  Output is FFT of lattice.
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein1,
    *latticein2,

==> fftlt.c <==
/* FFTLT.C - Calculate the fft of a lattice.
   
   Author: Mike Wall
   Date: 2/28/95
   Version: 1.
   
   Usage:
   		"fftlt <real input lattice> <imaginary input lattice>
		<real FFT lattice> <imaginary FFT lattice> <isign>"

		Input is real and imaginary lattice.  Output is FFT of
		lattice.  Isign=1 indicates forward; -1 indicates reverse.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE

==> filter.c <==
/* FILTER.C - Select data points from a list which match another in 
   the x-coordinate.
   
   Author: Mike Wall
   Date: 12/31/94
   Version: 1.0
   
   "filter <input list 1> <input list 2> <output list>"
   
   Input is two (x,y) lists.  Output is (x,y) of the second which have x2=x1.
   
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *infile1,
    *infile2,

==> ftfltim.c <==
/* FTFLTIM.C - Fourier-transform filter an image.
   
   Author: Mike Wall
   Date: 4/7/95
   Version: 1.
   
   Usage:
   		"ftfltim <input image> <output image> <length scale>"

		Input is image.  Output is FT filtered image.
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *imagein1,
    *imageout1;
  

==> gausslt.c <==
/* GAUSSLT.C - Generate a gaussian lattice.
   
   Author: Mike Wall
   Date: 2/28/95
   Version: 1.
   
   Usage:
   		"gausslt <input lattice> <output lattice> <peak> <width>"

		Input is lattice.  Output is FFT of lattice.
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein,
    *latticeout;
  

==> gencmd.c <==
#include<stdio.h>

void main(void)
{
	short i;

	for (i=0;i<=196;i++) {
		printf("dd if=/dev/nrtapensv of=lysh%d.tif bs=2101248\n",i);
	}
} 


==> genlat.c <==
/* GENLAT.C - Create a 3D lattice based upon an input list of
              diffraction images and index files.
   
   Author: Mike Wall
   Date: 2/22/95
   Version: 1.

   Usage:

   "genlat <output file > <inner radius cutoff> <outer radius cutoff>
   <x-origin> <y-origin> <z-origin> <minrange>"

      A list in the form of:

      <index file> <image file> <scale factor>

      must be supplied at standard input, terminated by '.' in the
      first character of the last line.

   */

==> genlat.new.c <==
/* GENLAT.C - Create a 3D lattice based upon an input list of
              diffraction images and index files.
   
   Author: Mike Wall
   Date: 2/22/95
   Version: 1.

   Usage:

   "genlat <output file > <inner radius cutoff> <outer radius cutoff>"

      A list in the form of:

      <index file> <image file> <scale factor>

      must be supplied at standard input, terminated by '.' in the
      first character of the line.

   */


==> genlat.tmp.c <==
/* GENLAT.C - Create a 3D lattice based upon an input list of
              diffraction images and index files.
   
   Author: Mike Wall
   Date: 2/22/95
   Version: 1.

   Usage:

   "genlat <output file > <inner radius cutoff> <outer radius cutoff> <minrange>"

      A list in the form of:

      <index file> <image file> <scale factor>

      must be supplied at standard input, terminated by '.' in the
      first character of the line.

   */


==> genlat.works.c <==
/* GENLAT.C - Create a 3D lattice based upon an input list of
              diffraction images and index files.
   
   Author: Mike Wall
   Date: 2/22/95
   Version: 1.

   Usage:

   "genlat <output file > <inner radius cutoff> <outer radius cutoff> <minrange>"

      A list in the form of:

      <index file> <image file> <scale factor>

      must be supplied at standard input, terminated by '.' in the
      first character of the line.

   */


==> genmap.c <==
/* GENMAP.C - Create a 3D map of the scattering intensity of a single 
		diffraction image.
   
   Author: Mike Wall
   Date: 3/20/93
   Version: 1.
   Date: 2/6/95
   Version: 2.
      Use orientation matrix to calculate absolute reciprocal lattice vector.
   
   "genmap <image in> <output file > <spindle_deg> <scale> <hsize> <vsize> 
		<header_length>"

   Input is diffraction image, spindle position and scale.  Output is a
   list of voxels (float x, float y, float z, float value) which
   represents a slice of reciprocal space. 

   */

#include<mwmask.h>

==> gmparse.c <==
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

#define SPACE 32

void main(void)
{
	char 
		inline[255],
		workstr[255],
		*ch;
	
	while (gets(inline) != NULL) {
		strcpy(workstr,inline);
		ch = strchr(workstr,SPACE);
		*ch = 0;
		if (strcmp(workstr,"pcat") != 0) {
			strcpy(workstr, ch + 1);
			ch = strchr(workstr,SPACE);

==> hdrlt.c <==
/* HDRLT.C - Generate a gaussian lattice.
   
   Author: Mike Wall
   Date: 3/2/95
   Version: 1.
   
   Usage:
   		"hdrlt <input lattice> <output lattice>"

		Input is lattice.  Output is header of lattice to stdout.
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein;
  
  char

==> headc.c <==
/*
 * HEADC.C	- Output the header of a specified file.  Use number of
		characters given on input line.

   Version: 1.0
   Date: 3/17/94

	Input line is:
			"headc -<number of characters> <input file>"

*/

#include<stdio.h>
#include<stdlib.h>

void main(int argc, char *argv[])
{
	FILE
		*infile;
	

==> histim.c <==
/* HISTIM.C - Histogram a specified patch in an image.
   
   Author: Mike Wall  
   Date: 3/12/95
   Version: 1.
   
   "histim <image in> <x_lower_bound> <x_upper_bound> <y_lower_bound> 
		<y_upper_bound> <histogram output file>"

   Input is diffraction image and boundaries of patch.  Output is
   histogram of pixel values in the patch, in ascii format.
   
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,

==> histlt.c <==
/* HISTLT.C - Histogram voxel values in a lattice in a specified */
/* spherical shell
   
   Author: Mike Wall
   Date: 3/22/95
   Version: 1.
   
   Usage:
   		"histlt <input lattice> <output histogram> <inner
		radius> <outer radius> <binsize>"

		Input is a 3D lattice.  Output is a historgam.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *histout,

==> intdfim.c <==
/* INTDFIM.C - Integrate diffuse features in a diffraction image and output to
               a file.
   
   Author: Mike Wall  
   Date: 5/28/94
   Version: 1.0
   
   "intdfim <diffuse features in> <image in> <diffuse features out>"

   Input is ascii diffuse features file and input image.  Output is
   diffuse features file.

*/

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *featurein,

==> intimdf.c <==
/* INTDFIM.C - Integrate diffuse features in a diffraction image and output to
               a file.
   
   Author: Mike Wall  
   Date: 5/28/94
   Version: 1.0
   
   "intdfim <diffuse features in> <image in> <diffuse features out>"

   Input is ascii diffuse features file and input image.  Output is
   diffuse features file.

*/

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *featurein,

==> map2lat.c <==
/* MAP2LAT.C - Generate a 3D lattice from an input voxel map.
   
   Author: Mike Wall
   Date: 3/28/93
   Version: 1.
   
   Usage:
   "map2lat <input file> <output file> <inner radius> 
   <outer radius> <x-origin> <y-origin> <z-origin> <minrange>"
   
   Input is a list of voxels (float x, float y,
   float z, float value).  Output 
   is a 3D lattice representation of the voxel map.
   
*/

#include<mwmask.h>

void main(int argc, char *argv[])
{

==> mapbound.c <==
/* MAPBOUND.C - Output the bounds in x,y,z,I for a list of input voxels (map).
   
   Author: Mike Wall
   Date: 3/20/93
   Version: 1.
   
   Usage:
   		"mapbound <input file>"

   Input is a list of voxels (float x, float y, float z, float value).  Output
	is (min(x),max(x),min(y),max(y),min(z),max(z),min(value),max(value).

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*infile;

==> maskimg.c <==
/* MASKIMG.C - Create a pixel mask based on input file coordinates.
   
   Author: Mike Wall   Modified by:Fredrik Osterberg
   Date: 1/11/93
   Version: 1.
   
   "maskimg <input file> <image in> <image out> <hsize> <vsize>"

   Input is ascii coordinates file.  Output is 16-bit 
   image of specified size (1024 x 1024 default).

   Date: 3/15/94
   Version: 2.
		Port to SGI.  Try to modularize the procedures.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{

==> medim.c <==
/* MEDIM.C - Remove the peaks from an image by median filtering using
              a specified mask size.
   
   Author: Mike Wall 
   Date: 4/8/95
   Version: 1.
   
   "medim <image in> <image out> <mask size>"

   Input is ascii coordinates file.  Output is 16-bit 
   image of specified size (1024 x 1024 default).

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,

==> minr.c <==
/* MINR.C - Generate a table of minimum voxel values as a function of radius
		for an input 3D lattice.
   
   Author: Mike Wall
   Date: 3/28/93
   Version: 1.
   
   Usage:
   		"minr <input file> <output file>"

   Input is a 3D lattice.  Output is a list of minima by radius, to be labelled
	(0,1,2,3,...).

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE

==> minrim.c <==
/* MINRIM.C - Calculate the minimum intensity as a function of radius for an
		input image.
   
   Author: Mike Wall   
   Date: 4/4/93
   Version: 1.
   
   "minrim <input image> <output rfile> <x origin> <y origin>"

   Input is TIFF TV6 image.  Output is a list of values of I(r).

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,
	*outfile;

==> modeim.c <==
/* MODEIM.C - Remove the peaks from an image by mode filtering using a
              specified mask size.
   
   Author: Mike Wall 
   Date: 2/2/95
   Version: 1.
   
   "modeim <image in> <image out> <mask size> <bin size>"

   Input is ascii coordinates file.  Output is 16-bit 
   image of specified size (1024 x 1024 default).

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,

==> mulim.c <==
/* MULIM.C - Multiply two images pixel-by-pixel.
   
   Author: Mike Wall
   Date: 4/27/94
   Version: 1.
   
   "mulim <input image 1> <x origin 1> <y origin 1> <input image 2> <x origin 2> <y origin 2> <output image>" 

   Input two diffraction images in TIFF TV6 format.  Output is the second 
   subtracted from the first, taking origin translation into account.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein1,
	*imagein2,

==> mullt.c <==
/* MULLT.C - Calculate the voxel-by-voxel product of two lattices.
   
   Author: Mike Wall
   Date: 4/11/95
   Version: 1.
   
   Usage:
   		"mullt <input lattice 1> <input lattice 2> <output
		lattice>"

		Input is two 3D lattices.  Output is a lattice which
		is the product of the two.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein1,

==> mulrf.c <==
/* MULRF.C - Multiply two rfiles.
   
   Author: Mike Wall
   Date: 1/12/95
   Version: 1.
   
   "mulrf <input rfile 1> <input rfile 2> <output rfile>"

   Input is two rfiles.  Output is product of rfiles, point-by-point.
   second.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*infile1,
	*infile2,

==> mulrfim.c <==
/* MULRFIM - Multiply an image by an rfile -> image.
   
   Author: Mike Wall
   Date: 4/4/94
   Version: 1.
   
   "mulrfim <input rfile> <image in> <image out> <x origin> <y origin>"

   Input is rfile and image.  Output is 16-bit 
   image multiplied by rfile.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*infile,
	*imagein,

==> mulsclt.c <==
/* MULSCLT.C - Multiply each voxel in a lattice by a scalar.
   
   Author: Mike Wall
   Date: 3/21/95
   Version: 1.
   
   Usage:
   		"mulsclt <input lattice> <scalar> <output lattice>"

		Input is a scalar and an input 
			lattice.  Output is a lattice.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein,
    *latticeout;

==> nign.c <==
/* NIGN.C - Calculate the number of ignored pixels vs radius for an
		input image.
   
   Author: Mike Wall   
   Date: 5/5/93
   Version: 1.
   
   "nign <input image> <output rfile> <x origin> <y origin>"

   Input is TIFF TV6 image.  Output is a list of values of N(r).

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,
	*outfile;

==> noiseim.c <==
/* NOISEIM - Create a noisy image.
   
   Author: Mike Wall
   Date: 4/10/95
   Version: 1.
   
   "noiseim <image in> <image out> <amplitude>" 

   Input is image and amplitude.  
   Output is noisy image of type input image.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *imagein,
    *imageout;

==> normim.c <==
/* NORMIM.C - Correct for solid-angle normalization and 
              detector-face rotation in a diffraction image.
   
   Author: Mike Wall
   Date: 2/24/95
   Version: 1.
   
   "normim <image in> <image out> <x origin> <y origin>
      <distance[mm]> <cassette rotx> <cassette roty>" 

   Input is diffraction image.  Output is normalized corrected image.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,

==> ovldim.c <==
/* OVLDIM.C - Punch out overloads in an image.
   
   Author: Mike Wall   Modified by:Fredrik Osterberg
   Date: 3/14/95
   Version: 1.
   
   "ovldim <image in> <image out>"
   
   Input is image with overloads.  Output is image with overloads
   expanded.

*/

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,
	*imageout;

==> peakim.c <==
/* PEAKIM - Create an image with various size and strength peaks.
   
   Author: Mike Wall
   Date: 4/6/95
   Version: 1.
   
   "peakim <image in> <image out> <max_amplitude> <pitch>" 

   Input is image, amplitude and pitch.  
   Output is image with peaks of varying amplitude and width
   of type input image.  Amplitude varies from zero to max_amplitude
   in x, while width varies from 1 pixel to pitch in x.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE

==> polarim.c <==
/* POLARIM.C - Perform polarization correction on a diffraction image.
   
   Author: Mike Wall
   Date: 4/26/94
   Version: 1.
   
   "polarim <image in> <image out> <x origin> <y origin>
      <distance[mm]> <polarization> <offset angle>" 

   Input is diffraction image.  Output is polarization corrected image.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,
	*imageout;

==> prtchr.c <==
#include<stdio.h>
#include<stdlib.h>

main()
{
	char 
		ch=0;
	do {
		putchar(ch);
		ch = getchar();
	} while (ch != 255);	
}



==> punchim.c <==
/* PUNCHIM.C - Mark all pixels inside a window in an image with an ignore tag.
   
   Author: Mike Wall  
   Date: 5/12/94
   Version: 1.
   
   "punchim <image in> <x_lower_bound> <x_upper_bound> <y_lower_bound> 
		<y_upper_bound> <image out>

   Input is diffraction image.  Output is 16-bit 
     image of specified size (1024 x 1024 default), with pixels inside bounds
     marked to be ignored.
   
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE

==> rad2s.c <==
#include<stdlib.h>
#include<math.h>
#include<stdio.h>

void main()
{
	char input_string[121];
	float x,y;
	float res;

	while (fgets(input_string,120,stdin) != NULL) {
		sscanf(input_string,"%g %g",&x,&y);
		res = 2*fsin(.5*atanf(.0508/56.4*x))/.91;
		printf("%e %e\n",res,y);
	}
}	

==> ratioim.c <==
/* RATIOIM.C - Scale one image to another in radial shells.
   
   Author: Mike Wall
   Date: 4/14/94
   Version: 1.
   
   "ratioim <input image 1> <x origin 1> <y origin 1> <input image 2> <x origin 2> <y origin 2> <output 1>" 

   Input two diffraction images in TIFF TV6 format.  Output is rfile
   with ratio as function of radius.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein1,
	*imagein2,

==> rf2char.c <==
/* RF2CHAR.C - Convert an ascii rfile from tv6 to a list of 8-bit integers, 
		stripping the x-axis.
   Author: Mike Wall
   Date: 3/25/94
   Version: 1.0
   Description:

		"rf2char <lower threshold> <upper threshold>"

		Input is an ascii rfile.  
		Output is an 8-bit list of densitometry values.
*/

#define DEFAULT_LOWER_THRESHOLD 0
#define DEFAULT_UPPER_THRESHOLD 32767
#define MAX_VALUE 32767

#include<mwmask.h>

void main(int argc, char *argv[])

==> rf2lt.c <==
/* RF2LT.C - Generate a lattice from an rfile.
   
   Author: Mike Wall
   Date: 3/3/95
   Version: 1.
   
   Usage:
   		"rf2lt <input rfile> <input lattice> <output lattice>"

		Input is a radial intensity distribution and an input 
			lattice.  Output is a lattice.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*infile,
	*latticein,

==> rmpkim.c <==
/* RMPKIM.C - Remove peaks by replacing them with background pixel values..
   
   Author: Mike Wall
   Date: 5/13/93
   Version: 1.
   
   "rmpkim <input file> <image in> <image out> <hsize> <vsize>"

   Input is ascii coordinates file.  Output is 16-bit 
   image of specified size (1024 x 1024 default).

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*infile,
	*imagein,

==> scaleim.c <==
/* SCALEIM.C - Scale one image to another in radial shells.
   
   Author: Mike Wall
   Date: 4/7/94
   Version: 1.
   
   "scaleim <input image 1> <x origin 1> <y origin 1> <input image 2> <x origin 2> <y origin 2> <output 1> <output 2>"

   Input two diffraction images in TIFF TV6 format.  Output is two rfiles
   with scale and offset as function of radius.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein1,
	*imagein2,

==> scalelt.c <==
/* SCALELT.C - Find the best scale factor relating two input lattices.
   
   Author: Mike Wall
   Date: 3/21/95
   Version: 1.
   
   Usage:
   		"scalelt <input lattice 1> <input lattice 2>"

		Input is two 3D lattices.  Output is a scale factor.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein1,
    *latticein2;
  

==> scalerf.c <==
/* SCALEIM.C - Scale one image to another in radial shells.
   
   Author: Mike Wall
   Date: 4/7/94
   Version: 1.
   
   "scaleim <input image 1> <x origin 1> <y origin 1> <input image 2> <x origin 2> <y origin 2> <output 1> <output 2>"

   Input two diffraction images in TIFF TV6 format.  Output is two rfiles
   with scale and offset as function of radius.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein1,
	*imagein2,

==> see.c <==
/* SEE.C - Convert a 16-bit 1024x1024 TV6 tiff image to an 8-bit tiff image.
		Scale to window given at input command line.
   Author: Mike Wall
   Date: 2/25/94
   Version: 1.0
   Description:

		"see <input file> <output file> <lower threshold> 
			<upper threshold>"

		Input is a 16-bit 1024x1024 TV6 tiff image.  
		Output is an 8-bit tiff image.
*/

#define LINESIZE 120
#define DEFAULT_HEADER_LENGTH 4096
#define DEFAULT_FILE_SIZE 2101248
#define DEFAULT_LOWER_THRESHOLD 256
#define DEFAULT_UPPER_THRESHOLD 32767
#define MAX_VALUE 32767

==> seecat.c <==
/* SEE.C - Convert a 16-bit 1024x1024 TV6 tiff image to an 8-bit tiff image.
		Scale to window given at input command line.
   Author: Mike Wall
   Date: 2/25/94
   Version: 1.0
   Description:

		"see <input file> <output file> <lower threshold> 
			<upper threshold>"

		Input is a 16-bit 1024x1024 TV6 tiff image.  
		Output is an 8-bit tiff image (to standard output).
*/

#define LINESIZE 120
#define DEFAULT_HEADER_LENGTH 4096
#define DEFAULT_FILE_SIZE 2101248
#define DEFAULT_LOWER_THRESHOLD 0
#define DEFAULT_UPPER_THRESHOLD 32767
#define MAX_VALUE 32767

==> seesh.c <==
/* SEESH.C - Convert a 16-bit SHIM image to an 8-bit image.
		Scale to window given at input command line.
   Author: Mike Wall
   Date: 3/26/95
   Version: 1.0
   Description:

		"seesh <input file> <output file> <lower threshold> 
			<upper threshold>"

		Input is a 16-bit SHIM image.  
		Output is an 8-bit image.
*/

#define LINESIZE 120
#define DEFAULT_HEADER_LENGTH 0
#define DEFAULT_FILE_SIZE 131072
#define DEFAULT_LOWER_THRESHOLD 256
#define DEFAULT_UPPER_THRESHOLD 32767
#define MAX_VALUE 32767

==> shim4lt.c <==
/* SHIM4LT.C - Generate an image of the full angular distribution of 
               intensity in a specified spherical shell of a lattice.
   
   Author: Mike Wall
   Date: 3/23/95
   Version: 1.
   
   Usage:
   		"shim4lt <input lattice> <output shim> <inner
		radius> <outer radius>"

		Input is a 3D lattice.  Output is a shell image.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *shimout,

==> shimlt.c <==
/* SHIMLT.C - Generate an image of a reduced angular distribution of
              intensity in a specified spherical shell of a lattice.
   
   Author: Mike Wall
   Date: 3/23/95
   Version: 1.
   
   Usage:
   		"shimlt <input lattice> <output shim> <inner
		radius> <outer radius>"

		Input is a 3D lattice.  Output is a shell image.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *shimout,

==> smthim.c <==
/* SMTHIM.C - Smooth an image.
   
   Author: Mike Wall
   Date: 4/11/93
   Version: 1.
   
   "smthim <image in> <image out> <hsize> <vsize>"

   Input is ascii coordinates file.  Output is 16-bit 
   image of specified size (1024 x 1024 default).

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,
	*imageout;

==> solidlt.c <==
/* SOLIDLT.C - Apply solid angle correction to lattice.
   
   Author: Mike Wall
   Date: 3/25/95
   Version: 1.
   
   Usage:
   		"solidlt <input lattice> <output lattice>"
		
		Input is a lattice.  Output is a lattice.  

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein,
    *latticeout;

==> subim.c <==
/* SUBIM.C - Subtract one image from another.
   
   Author: Mike Wall
   Date: 4/18/94
   Version: 1.
   
   "subim <input image 1> <x origin 1> <y origin 1> <input image 2> <x origin 2> <y origin 2> <output image>" 

   Input two diffraction images in TIFF TV6 format.  Output is the second 
   subtracted from the first, taking origin translation into account.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein1,
	*imagein2,

==> sublt.c <==
/* SUBLT.C - Calculate the voxel-by-voxel difference of two lattices.
   
   Author: Mike Wall
   Date: 7/7/95
   Version: 1.
   
   Usage:
   		"sublt <input lattice 1> <input lattice 2> <output
		lattice>"

		Input is two 3D lattices.  Output is a lattice which
		is the difference between the two.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein1,

==> subrf.c <==
/* SUBRF.C - Subtract one rfile from another.
   
   Author: Mike Wall
   Date: 5/1/94
   Version: 1.
   
   "subrf <input rfile 1> <input rfile 2> <output rfile>"

   Input is two rfiles.  Output is second rfile subtracted from the
   first.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*infile1,
	*infile2,

==> subrfim.c <==
/* SUBRFIM.C - Subtract I(r) from a diffraction image.
   
   Author: Mike Wall
   Date: 4/4/94
   Version: 1.
   
   "subrfim <input file> <image in> <image out> <x origin> <y origin>"

   Input is rfile and image.  Output is 16-bit 
   image with rfile subtracted.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*infile,
	*imagein,

==> subrflt.c <==
/* SUBRFLT.C - Subtract a radial intensity distribution from each pixel
		in a 3D lattice.
   
   Author: Mike Wall
   Date: 3/28/93
   Version: 1.
   
   Usage:
   		"subrflt <input rfile> <input lattice> <output lattice>"

		Input is a radial intensity distribution and an input 
			lattice.  Output is a lattice.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*infile,

==> sumim.c <==
/* SUMIM.C - Add one image to another.
   
   Author: Mike Wall
   Date: 4/6/95
   Version: 1.
   
   "sumim <input image 1> <x origin 1> <y origin 1> <input image 2> <x origin 2> <y origin 2> <output image>" 

   Input two diffraction images in TIFF TV6 format.  Output is the 
   sum, taking origin translation into account.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein1,
	*imagein2,

==> sumlt.c <==
/* SUMLT.C - Calculate the voxel-by-voxel sum of two lattices.
   
   Author: Mike Wall
   Date: 4/11/95
   Version: 1.
   
   Usage:
   		"sumlt <input lattice 1> <input lattice 2> <output
		lattice>"

		Input is two 3D lattices.  Output is a lattice which
		is the sum of the two.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein1,

==> sumrf.c <==
/* SUMRF.C - Sum two rfiles.
   
   Author: Mike Wall
   Date: 4/19/94
   Version: 1.
   
   "sumrf <input rfile 1> <input rfile 2> <output rfile>"

   Input is two rfiles.  Output is sum of rfiles, point-by-point.
   second.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*infile1,
	*infile2,

==> swapmw.c <==
#include<stdio.h>
#include<stdlib.h>

void main()
{
	char ch1,
		ch2;

	while( fread(&ch1, 1, 1, stdin) == 1) {
	  fread(&ch2, 1, 1, stdin);
	  fwrite(&ch2, 1, 1, stdout);
	  fwrite(&ch1, 1, 1, stdout);
	}
}

==> symlt.c <==
/* SYMLT.C - Symmetrize a lattice according to input line instructions.
   
   Author: Mike Wall
   Date: 2/28/95
   Version: 1.
   
   Usage:
   		"symlt <input lattice> <output lattice> <symmetry_operation>"

		Input are lattice and symmetry operation
		specification.  Output is symmetrized lattice.
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*latticein,
	*latticeout;

==> tag_overloads.c <==
/* TAG_OVERLOADS.C - Change 32767 to -1 (65535) in an input 16-bit greyscale
		image with a 4096 byte header (tv6 TIFF file).

   Author: Mike Wall
   Date: 2/26/94
   Version: 1.0
   Description:

		"tag_overloads <input file> <output file>" 

		Input is a 16-bit 1024x1024 TV6 tiff image.  
		Output is a 16-bit tiff image.
*/

#define LINESIZE 120
#define DEFAULT_HEADER_LENGTH 4096
#define DEFAULT_FILE_SIZE 2101248
#define MAX_PIXEL_VALUE 0xff7f		/* Remember...reversed byte order. */
#define OVERFLOW_TAG 0xffff		/* 65535 */


==> tagim.c <==
/* TAGIM.C - Tag pixels of a specified value with an ignore tag.
   
   Author: Mike Wall
   Date: 4/18/94
   Version: 1.
   
   "tagim <image in> <constant> <image out>" 

   Input is image and constant.  Output is input image with all pixel values 
   of value <constant> converted to an ingore_tag.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,
	*imageout;

==> taglt.c <==
/* TAGLT.C - Convert all voxels of specified value in a lattice to an 
             ignore_tag.
   
   Author: Mike Wall
   Date: 5/5/95
   Version: 1.
   
   Usage:
   		"taglt <input lattice> <output lattice> <target value>"

		Input is a scalar and an input 
			lattice.  Output is a lattice.  
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *latticein,

==> tagneg.c <==
/* TAGIM.C - Create an image with constant pixel value based on an input
		image format.
   
   Author: Mike Wall
   Date: 4/18/94
   Version: 1.
   
   "tagim <image in> <constant> <image out>" 

   Input is image and constant.  Output is input image with all pixel values 
   of value <constant> converted to an ingore_tag.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,

==> tailc.c <==
/*
 * TAILC.C	- Output the tail of a specified file.  Use number of
		characters given on input line.

   Version: 1.0
   Date: 3/17/94

	Input line is:
			"tailc -<number of characters> <input file>"

*/

#include<stdio.h>
#include<stdlib.h>

void main(int argc, char *argv[])
{
	FILE
		*infile;
	

==> thrshim.c <==
/* THRSHIM.C - Set all pixels above and below given thresholds equal to an 
		ignore_tag.
   
   Author: Mike Wall
   Date: 5/13/94
   Version: 1.
   
   "thrshim <image in> <lower> <upper> <image out>" 

   Input is image and upper and lower thresholds.  Output is input image 
   with all pixel values outside of thresholds converted to an ingore_tag.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*imagein,

==> totiff8.c <==
/* TOTIFF8.C - Convert a 16-bit 1024x1024 TV6 tiff image to an 8-bit tiff image.
   Author: Mike Wall
   Date: 8/17/93
   Version: 1.0
   Description:

		"totiff8 <input file> <output file>"

		Input is a 16-bit 1024x1024 TV6 tiff image.  
		Output is an 8-bit tiff image.
*/

#define LINESIZE 80
#define DEFAULT_HEADER_LENGTH 4096
#define DEFAULT_FILE_SIZE 2101248

#include<stdio.h>

union data_union {
	short two_byte;

==> tst3d.c <==
#include<stdio.h>
#include<math.h>
#include<stdlib.h>

#define DIM 101
#define LOWI -10.5
#define HIGHI 10.5
#define LOWJ -10.5
#define HIGHJ 10.5
#define LOWK -10.5
#define HIGHK 10.5
void main(void)
{
	int
		i,
		j,
		k;

	long
		res[3] = {DIM, DIM, DIM};

==> waveim.c <==
/* WAVEIM - Create an image with a fixed length scale fluctuation.
   
   Author: Mike Wall
   Date: 4/6/95
   Version: 1.
   
   "waveim <image in> <constant> <image out>" 

   Input is image, amplitude and pitch.  
   Output is wavy image of type input image.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
    *imagein,
    *imageout;

==> windim.c <==
/* WINDIM.C - Mark all pixels outside a window in an image with an ignore tag.
   
   Author: Mike Wall  
   Date: 4/25/94
   Version: 1.
   
   "windim <image in> <x_lower_bound> <x_upper_bound> <y_lower_bound> 
		<y_upper_bound> <image out>

   Input is diffraction image.  Output is 16-bit 
     image of specified size (1024 x 1024 default), with pixels outside bounds
     marked to be ignored.
   
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE

==> writehdr.c <==
#include<stdio.h>
#include<stdlib.h>

void main()
{
	long
		lattice_size = 16;

	float
		lower_bound = 0,
		upper_bound = 1;

	fwrite(&lattice_size,sizeof(long),1,stdout);
	fwrite(&lattice_size,sizeof(long),1,stdout);
	fwrite(&lattice_size,sizeof(long),1,stdout);
	fwrite(&lower_bound,sizeof(float),1,stdout);
	fwrite(&upper_bound,sizeof(float),1,stdout);
	fwrite(&lower_bound,sizeof(float),1,stdout);
	fwrite(&upper_bound,sizeof(float),1,stdout);
	fwrite(&lower_bound,sizeof(float),1,stdout);

==> xflt.c <==
/* XFLT.C - Transform a lattice according to input line instructions.
   
   Author: Mike Wall
   Date: 3/24/95
   Version: 1.
   
   Usage:
   		"xflt <input lattice> <output lattice> <operation>"

		Input are lattice and operation
		specification.  Output is transformed lattice.
   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE
	*latticein,
	*latticeout;

==> xfmask.c <==
/* XFMASK.C - Tag pixels as ignored in one image which in a second image are
		tagged as either overloads or ignored.  Positions are 
		reffered to origin.
   
   Author: Mike Wall
   Date: 4/11/94
   Version: 1.
   
   "xfmask <input image 1> <input image 2> <output image>" 

   Input two diffraction images in TIFF TV6 format.  Output is two rfiles
   with scale and offset as function of radius.

   */

#include<mwmask.h>

void main(int argc, char *argv[])
{
  FILE

==> xpl2mw.c <==
#include<stdio.h>
#include<math.h>
#include<stdlib.h>

#define DIM 20
#define LOWI -10.5
#define HIGHI 10.5
#define LOWJ -10.5
#define HIGHJ 10.5
#define LOWK -10.5
#define HIGHK 10.5
void main(void)
{
	int
		i,
		nrem,
		k;
	long
		count,
		matrix_size;
